"""
Ð“Ð¾Ð±Ð»Ð¸Ð½Ñ‹ ÐœÐ³Ð»Ð¸ÑÑ‚Ñ‹Ñ… Ð³Ð¾Ñ€ Ð¾Ñ‡ÐµÐ½ÑŒ Ð»ÑŽÐ±ÑÑ… Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ Ðº ÑÐ²Ð¾Ð¸Ð¼ ÑˆÐ°Ð¼Ð°Ð½Ð°Ð¼. 
Ð¢Ð°Ðº ÐºÐ°Ðº Ð³Ð¾Ð±Ð»Ð¸Ð½Ð¾Ð² Ð¼Ð½Ð¾Ð³Ð¾, Ðº ÑˆÐ°Ð¼Ð°Ð½Ð°Ð¼ Ñ‡Ð°ÑÑ‚Ð¾ Ð¾Ð±Ñ€Ð°Ð·ÑƒÑŽÑ‚ÑÑ Ð¾Ñ‡ÐµÐ½ÑŒ Ð´Ð»Ð¸Ð½Ð½Ñ‹Ðµ Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸. 
Ð Ð¿Ð¾ÑÐºÐ¾Ð»ÑŒÐºÑƒ Ð¼Ð½Ð¾Ð³Ð¾ Ð³Ð¾Ð±Ð»Ð¸Ð½Ð¾Ð² Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð¼ÐµÑÑ‚Ðµ Ð±Ñ‹ÑÑ‚Ñ€Ð¾ Ð¾Ð±Ñ€Ð°Ð·ÑƒÑŽÑ‚ ÑˆÑƒÐ¼Ð½ÑƒÑŽ Ñ‚Ð¾Ð»ÐºÑƒ, 
ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¼ÐµÑˆÐ°ÐµÑ‚ ÑˆÐ°Ð¼Ð°Ð½Ð°Ð¼ Ð¿Ñ€Ð¾Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ Ð¼ÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¸Ðµ Ð¼Ð°Ð½Ð¸Ð¿ÑƒÐ»ÑÑ†Ð¸Ð¸, 
Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ Ñ€ÐµÑˆÐ¸Ð»Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° ÐºÐ°ÑÐ°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ð¾Ñ€ÑÐ´ÐºÐ° Ð² Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸.

ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ðµ Ð³Ð¾Ð±Ð»Ð¸Ð½Ñ‹ Ð¿Ñ€Ð¸ Ð¿Ð¾ÑÐµÑ‰ÐµÐ½Ð¸Ð¸ ÑˆÐ°Ð¼Ð°Ð½Ð¾Ð² Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð²ÑÑ‚Ð°Ð²Ð°Ñ‚ÑŒ Ð² ÐºÐ¾Ð½ÐµÑ† Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸. 
ÐŸÑ€Ð¸Ð²Ð¸Ð»ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¶Ðµ Ð³Ð¾Ð±Ð»Ð¸Ð½Ñ‹, Ð·Ð½Ð°ÑŽÑ‰Ð¸Ðµ Ð¾ÑÐ¾Ð±Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ, Ð²ÑÑ‚Ð°ÑŽÑ‚ Ñ€Ð¾Ð²Ð½Ð¾ Ð² ÐµÐµ ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñƒ, 
Ð¿Ñ€Ð¸Ñ‡ÐµÐ¼ Ð¿Ñ€Ð¸ Ð½ÐµÑ‡ÐµÑ‚Ð½Ð¾Ð¹ Ð´Ð»Ð¸Ð½Ðµ Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸ Ð¾Ð½Ð¸ Ð²ÑÑ‚Ð°ÑŽÑ‚ ÑÑ€Ð°Ð·Ñƒ Ð·Ð° Ñ†ÐµÐ½Ñ‚Ñ€Ð¾Ð¼.

Ð¢Ð°Ðº ÐºÐ°Ðº Ð³Ð¾Ð±Ð»Ð¸Ð½Ñ‹ Ñ‚Ð°ÐºÐ¶Ðµ ÑˆÐ¸Ñ€Ð¾ÐºÐ¾ Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹ ÑÐ²Ð¾Ð¸Ð¼ Ð½ÐµÐ¿Ð¾Ñ‡Ñ‚Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸ÐµÐ¼ ÐºÐ¾ Ð²ÑÑÑ‡ÐµÑÐºÐ¸Ð¼ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°Ð¼ Ð¸ Ð·Ð°ÐºÐ¾Ð½Ð°Ð¼, 
ÑˆÐ°Ð¼Ð°Ð½Ñ‹ Ð¿Ð¾Ð¿Ñ€Ð¾ÑÐ¸Ð»Ð¸ Ð²Ð°Ñ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð±Ñ‹ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð»Ð° Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð³Ð¾Ð±Ð»Ð¸Ð½Ð¾Ð² Ð² Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸.

Ð’Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
Ð’ Ð¿ÐµÑ€Ð²Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐµ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð¾ Ñ‡Ð¸ÑÐ»Ð¾ ð‘ (1â‰¤ð‘â‰¤10^5) - ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ðº Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ðµ. 
Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ð‘ ÑÑ‚Ñ€Ð¾Ðº ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ:

"+ i" - Ð³Ð¾Ð±Ð»Ð¸Ð½ Ñ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð¼ ð‘– (1â‰¤ð‘–â‰¤ð‘) Ð²ÑÑ‚Ð°ÐµÑ‚ Ð² ÐºÐ¾Ð½ÐµÑ† Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸.
"* i" - Ð¿Ñ€Ð¸Ð²Ð¸Ð»ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð³Ð¾Ð±Ð»Ð¸Ð½ Ñ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð¼ ð‘– Ð²ÑÑ‚Ð°ÐµÑ‚ Ð² ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñƒ Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸.
"-" - Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð³Ð¾Ð±Ð»Ð¸Ð½ Ð¸Ð· Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸ ÑƒÑ…Ð¾Ð´Ð¸Ñ‚ Ðº ÑˆÐ°Ð¼Ð°Ð½Ð°Ð¼. Ð“Ð°Ñ€Ð°Ð½Ñ‚Ð¸Ñ€ÑƒÐµÑ‚ÑÑ, Ñ‡Ñ‚Ð¾ Ð½Ð° Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ Ð½Ðµ Ð¿ÑƒÑÑ‚Ð°.
Ð’Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ñ‚Ð¸Ð¿Ð° "-" Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð´Ð¾Ð»Ð¶Ð½Ð° Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ Ð½Ð¾Ð¼ÐµÑ€ Ð³Ð¾Ð±Ð»Ð¸Ð½Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð·Ð°Ð¹Ñ‚Ð¸ Ðº ÑˆÐ°Ð¼Ð°Ð½Ð°Ð¼.
"""

from collections import deque


left = deque()
right = deque()

N = int(input())

for _ in range(N):
    command = input().split()

    if command[0] == '+':
        right.append(command[1])

    elif command[0] == '*':
        if len(left) > len(right):
            right.appendleft(command[1])
        else:
            left.append(command[1])

    elif command[0] == '-':
        print(left.popleft())

    if len(left) < len(right):
        left.append(right.popleft())