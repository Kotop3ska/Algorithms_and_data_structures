"""
–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —è–≤–ª—è–µ—Ç—Å—è –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–º, —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤, 
–≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã—Ö –Ω–∞ –æ–±—â–µ–π –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏. –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ –∏–º–µ—é—Ç —Ä–∞–≤–Ω—É—é —à–∏—Ä–∏–Ω—É, –Ω–æ –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤—ã—Å–æ—Ç—ã. 
–ù–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–≥—É—Ä–∞ —Å–ª–µ–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ —Å –≤—ã—Å–æ—Ç–∞–º–∏ 2, 1, 4, 5, 1, 3, 3. 
–í—Å–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ –Ω–∞ —ç—Ç–æ–º —Ä–∏—Å—É–Ω–∫–µ –∏–º–µ—é—Ç —à–∏—Ä–∏–Ω—É, —Ä–∞–≤–Ω—É—é 1.


–û–±—ã—á–Ω–æ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∞—Å—Ç–æ—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–∞—Ö. 
–û—Ç–º–µ—Ç—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—è–¥–æ–∫ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –æ—á–µ–Ω—å –≤–∞–∂–µ–Ω. 
–í—ã—á–∏—Å–ª–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å —Å–∞–º–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ –≤ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–µ, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –æ–±—â–µ–π –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏. 
–ù–∞ —Ä–∏—Å—É–Ω–∫–µ —Å–ø—Ä–∞–≤–∞ –∑–∞—à—Ç—Ä–∏—Ö–æ–≤–∞–Ω–Ω–∞—è —Ñ–∏–≥—É—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º—ã–º –±–æ–ª—å—à–∏–º –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–º –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–Ω–æ–π –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–µ.

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∑–∞–ø–∏—Å–∞–Ω–æ —á–∏—Å–ª–æ ùëÅ (0 < ùëÅ ‚â§ 10^6) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã. 
–ó–∞—Ç–µ–º —Å–ª–µ–¥—É–µ—Ç ùëÅ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª ‚Ñé1...‚Ñéùëõ, –≥–¥–µ 0 ‚â§ ‚Ñéùëñ ‚â§ 109. –≠—Ç–∏ —á–∏—Å–ª–∞ –æ–±–æ–∑–Ω–∞—á–∞—é—Ç –≤—ã—Å–æ—Ç—ã –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ. 
–®–∏—Ä–∏–Ω–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω–∞ 1

–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–í—ã–≤–µ–¥–∏—Ç–µ –ø–ª–æ—â–∞–¥—å —Å–∞–º–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ –≤ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–µ. 
–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —ç—Ç–æ—Ç –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –æ–±—â–µ–π –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏.
"""

heights = [int(x) for x in input().split()]
n = heights.pop(0)
stack = []
mx = 0
index = 0

while index < len(heights):
    if not stack or heights[index] >= heights[stack[-1]]:
        stack.append(index)
        index += 1
    else:
        ind = stack.pop()
        area = heights[ind] * (index if not stack else (index - stack[-1] - 1))
        mx = max(mx, area)

while stack:
    ind = stack.pop()
    area = heights[ind] * (index if not stack else (index - stack[-1] - 1))
    mx = max(mx, area)

print(mx)